{"ast":null,"code":"const axios = require('axios');\n\nconst {\n  checkOptions,\n  getTitle\n} = require('./utils');\n\nconst searchUrl = 'https://api.genius.com/search?q=';\n/**\r\n * @param {{apiKey: string, title: string, artist: string, optimizeQuery: boolean}} options\r\n */\n\nmodule.exports = async function (options) {\n  try {\n    checkOptions(options);\n    let {\n      apiKey,\n      title,\n      artist,\n      optimizeQuery = false\n    } = options;\n    const song = optimizeQuery ? getTitle(title, artist) : `${title} ${artist}`;\n    const reqUrl = `${searchUrl}${encodeURI(song)}`;\n    const headers = {\n      Authorization: 'Bearer ' + apiKey\n    };\n    let {\n      data\n    } = await axios.get(reqUrl, {\n      headers\n    });\n    if (data.response.hits.length === 0) return null;\n    const results = data.response.hits.map(val => {\n      const {\n        full_title,\n        song_art_image_url,\n        id,\n        url\n      } = val.result;\n      return {\n        id,\n        title: full_title,\n        albumArt: song_art_image_url,\n        url\n      };\n    });\n    return results;\n  } catch (e) {\n    throw e;\n  }\n};","map":{"version":3,"sources":["C:/Users/נוי בנג'ו/Documents/ראיונות עבודה/coognitive/coognitive-lyrics-app/node_modules/genius-lyrics-api/lib/searchSong.js"],"names":["axios","require","checkOptions","getTitle","searchUrl","module","exports","options","apiKey","title","artist","optimizeQuery","song","reqUrl","encodeURI","headers","Authorization","data","get","response","hits","length","results","map","val","full_title","song_art_image_url","id","url","result","albumArt","e"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAM;AAAEC,EAAAA,YAAF;AAAgBC,EAAAA;AAAhB,IAA6BF,OAAO,CAAC,SAAD,CAA1C;;AAEA,MAAMG,SAAS,GAAG,kCAAlB;AAEA;AACA;AACA;;AACAC,MAAM,CAACC,OAAP,GAAiB,gBAAgBC,OAAhB,EAAyB;AACzC,MAAI;AACHL,IAAAA,YAAY,CAACK,OAAD,CAAZ;AACA,QAAI;AAAEC,MAAAA,MAAF;AAAUC,MAAAA,KAAV;AAAiBC,MAAAA,MAAjB;AAAyBC,MAAAA,aAAa,GAAG;AAAzC,QAAmDJ,OAAvD;AACA,UAAMK,IAAI,GAAGD,aAAa,GAAGR,QAAQ,CAACM,KAAD,EAAQC,MAAR,CAAX,GAA8B,GAAED,KAAM,IAAGC,MAAO,EAA1E;AACA,UAAMG,MAAM,GAAI,GAAET,SAAU,GAAEU,SAAS,CAACF,IAAD,CAAO,EAA9C;AACA,UAAMG,OAAO,GAAG;AACfC,MAAAA,aAAa,EAAE,YAAYR;AADZ,KAAhB;AAGA,QAAI;AAAES,MAAAA;AAAF,QAAW,MAAMjB,KAAK,CAACkB,GAAN,CAAUL,MAAV,EAAkB;AAAEE,MAAAA;AAAF,KAAlB,CAArB;AACA,QAAIE,IAAI,CAACE,QAAL,CAAcC,IAAd,CAAmBC,MAAnB,KAA8B,CAAlC,EAAqC,OAAO,IAAP;AACrC,UAAMC,OAAO,GAAGL,IAAI,CAACE,QAAL,CAAcC,IAAd,CAAmBG,GAAnB,CAAwBC,GAAD,IAAS;AAC/C,YAAM;AAAEC,QAAAA,UAAF;AAAcC,QAAAA,kBAAd;AAAkCC,QAAAA,EAAlC;AAAsCC,QAAAA;AAAtC,UAA8CJ,GAAG,CAACK,MAAxD;AACA,aAAO;AAAEF,QAAAA,EAAF;AAAMlB,QAAAA,KAAK,EAAEgB,UAAb;AAAyBK,QAAAA,QAAQ,EAAEJ,kBAAnC;AAAuDE,QAAAA;AAAvD,OAAP;AACA,KAHe,CAAhB;AAIA,WAAON,OAAP;AACA,GAfD,CAeE,OAAOS,CAAP,EAAU;AACX,UAAMA,CAAN;AACA;AACD,CAnBD","sourcesContent":["const axios = require('axios');\r\nconst { checkOptions, getTitle } = require('./utils');\r\n\r\nconst searchUrl = 'https://api.genius.com/search?q=';\r\n\r\n/**\r\n * @param {{apiKey: string, title: string, artist: string, optimizeQuery: boolean}} options\r\n */\r\nmodule.exports = async function (options) {\r\n\ttry {\r\n\t\tcheckOptions(options);\r\n\t\tlet { apiKey, title, artist, optimizeQuery = false } = options;\r\n\t\tconst song = optimizeQuery ? getTitle(title, artist) : `${title} ${artist}`;\r\n\t\tconst reqUrl = `${searchUrl}${encodeURI(song)}`;\r\n\t\tconst headers = {\r\n\t\t\tAuthorization: 'Bearer ' + apiKey\r\n\t\t};\r\n\t\tlet { data } = await axios.get(reqUrl, { headers });\r\n\t\tif (data.response.hits.length === 0) return null;\r\n\t\tconst results = data.response.hits.map((val) => {\r\n\t\t\tconst { full_title, song_art_image_url, id, url } = val.result;\r\n\t\t\treturn { id, title: full_title, albumArt: song_art_image_url, url };\r\n\t\t});\r\n\t\treturn results;\r\n\t} catch (e) {\r\n\t\tthrow e;\r\n\t}\r\n};\r\n"]},"metadata":{},"sourceType":"script"}