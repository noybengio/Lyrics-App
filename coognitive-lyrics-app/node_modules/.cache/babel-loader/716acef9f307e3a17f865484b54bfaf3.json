{"ast":null,"code":"var _ = require('lodash'),\n    $ = require('../static'),\n    utils = require('../utils'),\n    isTag = utils.isTag,\n    domEach = utils.domEach,\n    hasOwn = Object.prototype.hasOwnProperty,\n    camelCase = utils.camelCase,\n    cssCase = utils.cssCase,\n    rspace = /\\s+/,\n    dataAttrPrefix = 'data-',\n    // Lookup table for coercing string data-* attributes to their corresponding\n// JavaScript primitives\nprimitives = {\n  null: null,\n  true: true,\n  false: false\n},\n    // Attributes that are booleans\nrboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,\n    // Matches strings that look like JSON objects or arrays\nrbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/;\n\nvar getAttr = function (elem, name) {\n  if (!elem || !isTag(elem)) return;\n\n  if (!elem.attribs) {\n    elem.attribs = {};\n  } // Return the entire attribs object if no attribute specified\n\n\n  if (!name) {\n    return elem.attribs;\n  }\n\n  if (hasOwn.call(elem.attribs, name)) {\n    // Get the (decoded) attribute\n    return rboolean.test(name) ? name : elem.attribs[name];\n  } // Mimic the DOM and return text content as value for `option's`\n\n\n  if (elem.name === 'option' && name === 'value') {\n    return $.text(elem.children);\n  } // Mimic DOM with default value for radios/checkboxes\n\n\n  if (elem.name === 'input' && (elem.attribs.type === 'radio' || elem.attribs.type === 'checkbox') && name === 'value') {\n    return 'on';\n  }\n};\n\nvar setAttr = function (el, name, value) {\n  if (value === null) {\n    removeAttribute(el, name);\n  } else {\n    el.attribs[name] = value + '';\n  }\n};\n\nexports.attr = function (name, value) {\n  // Set the value (with attr map support)\n  if (typeof name === 'object' || value !== undefined) {\n    if (typeof value === 'function') {\n      return domEach(this, function (i, el) {\n        setAttr(el, name, value.call(el, i, el.attribs[name]));\n      });\n    }\n\n    return domEach(this, function (i, el) {\n      if (!isTag(el)) return;\n\n      if (typeof name === 'object') {\n        _.each(name, function (value, name) {\n          setAttr(el, name, value);\n        });\n      } else {\n        setAttr(el, name, value);\n      }\n    });\n  }\n\n  return getAttr(this[0], name);\n};\n\nvar getProp = function (el, name) {\n  return el.hasOwnProperty(name) ? el[name] : rboolean.test(name) ? getAttr(el, name) !== undefined : getAttr(el, name);\n};\n\nvar setProp = function (el, name, value) {\n  el[name] = rboolean.test(name) ? !!value : value;\n};\n\nexports.prop = function (name, value) {\n  var i = 0,\n      property;\n\n  if (typeof name === 'string' && value === undefined) {\n    switch (name) {\n      case 'style':\n        property = this.css();\n\n        _.each(property, function (v, p) {\n          property[i++] = p;\n        });\n\n        property.length = i;\n        break;\n\n      case 'tagName':\n      case 'nodeName':\n        property = this[0].name.toUpperCase();\n        break;\n\n      default:\n        property = getProp(this[0], name);\n    }\n\n    return property;\n  }\n\n  if (typeof name === 'object' || value !== undefined) {\n    if (typeof value === 'function') {\n      return domEach(this, function (i, el) {\n        setProp(el, name, value.call(el, i, getProp(el, name)));\n      });\n    }\n\n    return domEach(this, function (i, el) {\n      if (!isTag(el)) return;\n\n      if (typeof name === 'object') {\n        _.each(name, function (val, name) {\n          setProp(el, name, val);\n        });\n      } else {\n        setProp(el, name, value);\n      }\n    });\n  }\n};\n\nvar setData = function (el, name, value) {\n  if (!el.data) {\n    el.data = {};\n  }\n\n  if (typeof name === 'object') return _.extend(el.data, name);\n\n  if (typeof name === 'string' && value !== undefined) {\n    el.data[name] = value;\n  } else if (typeof name === 'object') {\n    _.exend(el.data, name);\n  }\n}; // Read the specified attribute from the equivalent HTML5 `data-*` attribute,\n// and (if present) cache the value in the node's internal data store. If no\n// attribute name is specified, read *all* HTML5 `data-*` attributes in this\n// manner.\n\n\nvar readData = function (el, name) {\n  var readAll = arguments.length === 1;\n  var domNames, domName, jsNames, jsName, value, idx, length;\n\n  if (readAll) {\n    domNames = Object.keys(el.attribs).filter(function (attrName) {\n      return attrName.slice(0, dataAttrPrefix.length) === dataAttrPrefix;\n    });\n    jsNames = domNames.map(function (domName) {\n      return camelCase(domName.slice(dataAttrPrefix.length));\n    });\n  } else {\n    domNames = [dataAttrPrefix + cssCase(name)];\n    jsNames = [name];\n  }\n\n  for (idx = 0, length = domNames.length; idx < length; ++idx) {\n    domName = domNames[idx];\n    jsName = jsNames[idx];\n\n    if (hasOwn.call(el.attribs, domName)) {\n      value = el.attribs[domName];\n\n      if (hasOwn.call(primitives, value)) {\n        value = primitives[value];\n      } else if (value === String(Number(value))) {\n        value = Number(value);\n      } else if (rbrace.test(value)) {\n        try {\n          value = JSON.parse(value);\n        } catch (e) {}\n      }\n\n      el.data[jsName] = value;\n    }\n  }\n\n  return readAll ? el.data : value;\n};\n\nexports.data = function (name, value) {\n  var elem = this[0];\n  if (!elem || !isTag(elem)) return;\n\n  if (!elem.data) {\n    elem.data = {};\n  } // Return the entire data object if no data specified\n\n\n  if (!name) {\n    return readData(elem);\n  } // Set the value (with attr map support)\n\n\n  if (typeof name === 'object' || value !== undefined) {\n    domEach(this, function (i, el) {\n      setData(el, name, value);\n    });\n    return this;\n  } else if (hasOwn.call(elem.data, name)) {\n    return elem.data[name];\n  }\n\n  return readData(elem, name);\n};\n/**\n * Get the value of an element\n */\n\n\nexports.val = function (value) {\n  var querying = arguments.length === 0,\n      element = this[0];\n  if (!element) return;\n\n  switch (element.name) {\n    case 'textarea':\n      return this.text(value);\n\n    case 'input':\n      switch (this.attr('type')) {\n        case 'radio':\n          if (querying) {\n            return this.attr('value');\n          } else {\n            this.attr('value', value);\n            return this;\n          }\n\n          break;\n\n        default:\n          return this.attr('value', value);\n      }\n\n      return;\n\n    case 'select':\n      var option = this.find('option:selected'),\n          returnValue;\n      if (option === undefined) return undefined;\n\n      if (!querying) {\n        if (!this.attr().hasOwnProperty('multiple') && typeof value == 'object') {\n          return this;\n        }\n\n        if (typeof value != 'object') {\n          value = [value];\n        }\n\n        this.find('option').removeAttr('selected');\n\n        for (var i = 0; i < value.length; i++) {\n          this.find('option[value=\"' + value[i] + '\"]').attr('selected', '');\n        }\n\n        return this;\n      }\n\n      returnValue = option.attr('value');\n\n      if (this.attr().hasOwnProperty('multiple')) {\n        returnValue = [];\n        domEach(option, function (i, el) {\n          returnValue.push(getAttr(el, 'value'));\n        });\n      }\n\n      return returnValue;\n\n    case 'option':\n      if (!querying) {\n        this.attr('value', value);\n        return this;\n      }\n\n      return this.attr('value');\n  }\n};\n/**\n * Remove an attribute\n */\n\n\nvar removeAttribute = function (elem, name) {\n  if (!elem.attribs || !hasOwn.call(elem.attribs, name)) return;\n  delete elem.attribs[name];\n};\n\nexports.removeAttr = function (name) {\n  domEach(this, function (i, elem) {\n    removeAttribute(elem, name);\n  });\n  return this;\n};\n\nexports.hasClass = function (className) {\n  return _.some(this, function (elem) {\n    var attrs = elem.attribs,\n        clazz = attrs && attrs['class'],\n        idx = -1,\n        end;\n\n    if (clazz) {\n      while ((idx = clazz.indexOf(className, idx + 1)) > -1) {\n        end = idx + className.length;\n\n        if ((idx === 0 || rspace.test(clazz[idx - 1])) && (end === clazz.length || rspace.test(clazz[end]))) {\n          return true;\n        }\n      }\n    }\n  });\n};\n\nexports.addClass = function (value) {\n  // Support functions\n  if (typeof value === 'function') {\n    return domEach(this, function (i, el) {\n      var className = el.attribs['class'] || '';\n      exports.addClass.call([el], value.call(el, i, className));\n    });\n  } // Return if no value or not a string or function\n\n\n  if (!value || typeof value !== 'string') return this;\n  var classNames = value.split(rspace),\n      numElements = this.length;\n\n  for (var i = 0; i < numElements; i++) {\n    // If selected element isn't a tag, move on\n    if (!isTag(this[i])) continue; // If we don't already have classes\n\n    var className = getAttr(this[i], 'class'),\n        numClasses,\n        setClass;\n\n    if (!className) {\n      setAttr(this[i], 'class', classNames.join(' ').trim());\n    } else {\n      setClass = ' ' + className + ' ';\n      numClasses = classNames.length; // Check if class already exists\n\n      for (var j = 0; j < numClasses; j++) {\n        var appendClass = classNames[j] + ' ';\n        if (setClass.indexOf(' ' + appendClass) < 0) setClass += appendClass;\n      }\n\n      setAttr(this[i], 'class', setClass.trim());\n    }\n  }\n\n  return this;\n};\n\nvar splitClass = function (className) {\n  return className ? className.trim().split(rspace) : [];\n};\n\nexports.removeClass = function (value) {\n  var classes, numClasses, removeAll; // Handle if value is a function\n\n  if (typeof value === 'function') {\n    return domEach(this, function (i, el) {\n      exports.removeClass.call([el], value.call(el, i, el.attribs['class'] || ''));\n    });\n  }\n\n  classes = splitClass(value);\n  numClasses = classes.length;\n  removeAll = arguments.length === 0;\n  return domEach(this, function (i, el) {\n    if (!isTag(el)) return;\n\n    if (removeAll) {\n      // Short circuit the remove all case as this is the nice one\n      el.attribs.class = '';\n    } else {\n      var elClasses = splitClass(el.attribs.class),\n          index,\n          changed;\n\n      for (var j = 0; j < numClasses; j++) {\n        index = elClasses.indexOf(classes[j]);\n\n        if (index >= 0) {\n          elClasses.splice(index, 1);\n          changed = true; // We have to do another pass to ensure that there are not duplicate\n          // classes listed\n\n          j--;\n        }\n      }\n\n      if (changed) {\n        el.attribs.class = elClasses.join(' ');\n      }\n    }\n  });\n};\n\nexports.toggleClass = function (value, stateVal) {\n  // Support functions\n  if (typeof value === 'function') {\n    return domEach(this, function (i, el) {\n      exports.toggleClass.call([el], value.call(el, i, el.attribs['class'] || '', stateVal), stateVal);\n    });\n  } // Return if no value or not a string or function\n\n\n  if (!value || typeof value !== 'string') return this;\n  var classNames = value.split(rspace),\n      numClasses = classNames.length,\n      state = typeof stateVal === 'boolean' ? stateVal ? 1 : -1 : 0,\n      numElements = this.length,\n      elementClasses,\n      index;\n\n  for (var i = 0; i < numElements; i++) {\n    // If selected element isn't a tag, move on\n    if (!isTag(this[i])) continue;\n    elementClasses = splitClass(this[i].attribs.class); // Check if class already exists\n\n    for (var j = 0; j < numClasses; j++) {\n      // Check if the class name is currently defined\n      index = elementClasses.indexOf(classNames[j]); // Add if stateValue === true or we are toggling and there is no value\n\n      if (state >= 0 && index < 0) {\n        elementClasses.push(classNames[j]);\n      } else if (state <= 0 && index >= 0) {\n        // Otherwise remove but only if the item exists\n        elementClasses.splice(index, 1);\n      }\n    }\n\n    this[i].attribs.class = elementClasses.join(' ');\n  }\n\n  return this;\n};\n\nexports.is = function (selector) {\n  if (selector) {\n    return this.filter(selector).length > 0;\n  }\n\n  return false;\n};","map":{"version":3,"sources":["C:/Users/נוי בנג'ו/Documents/ראיונות עבודה/coognitive/coognitive-lyrics-app/node_modules/cheerio-without-node-native/lib/api/attributes.js"],"names":["_","require","$","utils","isTag","domEach","hasOwn","Object","prototype","hasOwnProperty","camelCase","cssCase","rspace","dataAttrPrefix","primitives","null","true","false","rboolean","rbrace","getAttr","elem","name","attribs","call","test","text","children","type","setAttr","el","value","removeAttribute","exports","attr","undefined","i","each","getProp","setProp","prop","property","css","v","p","length","toUpperCase","val","setData","data","extend","exend","readData","readAll","arguments","domNames","domName","jsNames","jsName","idx","keys","filter","attrName","slice","map","String","Number","JSON","parse","e","querying","element","option","find","returnValue","removeAttr","push","hasClass","className","some","attrs","clazz","end","indexOf","addClass","classNames","split","numElements","numClasses","setClass","join","trim","j","appendClass","splitClass","removeClass","classes","removeAll","class","elClasses","index","changed","splice","toggleClass","stateVal","state","elementClasses","is","selector"],"mappings":"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","sourcesContent":["var _ = require('lodash'),\n  $ = require('../static'),\n  utils = require('../utils'),\n  isTag = utils.isTag,\n  domEach = utils.domEach,\n  hasOwn = Object.prototype.hasOwnProperty,\n  camelCase = utils.camelCase,\n  cssCase = utils.cssCase,\n  rspace = /\\s+/,\n  dataAttrPrefix = 'data-',\n\n  // Lookup table for coercing string data-* attributes to their corresponding\n  // JavaScript primitives\n  primitives = {\n    null: null,\n    true: true,\n    false: false\n  },\n\n  // Attributes that are booleans\n  rboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,\n  // Matches strings that look like JSON objects or arrays\n  rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/;\n\n\nvar getAttr = function(elem, name) {\n  if (!elem || !isTag(elem)) return;\n\n  if (!elem.attribs) {\n    elem.attribs = {};\n  }\n\n  // Return the entire attribs object if no attribute specified\n  if (!name) {\n    return elem.attribs;\n  }\n\n  if (hasOwn.call(elem.attribs, name)) {\n    // Get the (decoded) attribute\n    return rboolean.test(name) ? name : elem.attribs[name];\n  }\n\n  // Mimic the DOM and return text content as value for `option's`\n  if (elem.name === 'option' && name === 'value') {\n    return $.text(elem.children);\n  }\n\n  // Mimic DOM with default value for radios/checkboxes\n  if (elem.name === 'input' &&\n      (elem.attribs.type === 'radio' || elem.attribs.type === 'checkbox') &&\n      name === 'value') {\n    return 'on';\n  }\n};\n\nvar setAttr = function(el, name, value) {\n\n  if (value === null) {\n    removeAttribute(el, name);\n  } else {\n    el.attribs[name] = value+'';\n  }\n};\n\nexports.attr = function(name, value) {\n  // Set the value (with attr map support)\n  if (typeof name === 'object' || value !== undefined) {\n    if (typeof value === 'function') {\n      return domEach(this, function(i, el) {\n        setAttr(el, name, value.call(el, i, el.attribs[name]));\n      });\n    }\n    return domEach(this, function(i, el) {\n      if (!isTag(el)) return;\n\n      if (typeof name === 'object') {\n        _.each(name, function(value, name) {\n          setAttr(el, name, value);\n        });\n      } else {\n        setAttr(el, name, value);\n      }\n    });\n  }\n\n  return getAttr(this[0], name);\n};\n\nvar getProp = function (el, name) {\n  return el.hasOwnProperty(name)\n      ? el[name]\n      : rboolean.test(name)\n          ? getAttr(el, name) !== undefined\n          : getAttr(el, name);\n};\n\nvar setProp = function (el, name, value) {\n  el[name] = rboolean.test(name) ? !!value : value;\n};\n\nexports.prop = function (name, value) {\n  var i = 0,\n      property;\n\n  if (typeof name === 'string' && value === undefined) {\n\n    switch (name) {\n      case 'style':\n        property = this.css();\n\n        _.each(property, function (v, p) {\n          property[i++] = p;\n        });\n\n        property.length = i;\n\n        break;\n      case 'tagName':\n      case 'nodeName':\n        property = this[0].name.toUpperCase();\n        break;\n      default:\n        property = getProp(this[0], name);\n    }\n\n    return property;\n  }\n\n  if (typeof name === 'object' || value !== undefined) {\n\n    if (typeof value === 'function') {\n      return domEach(this, function(i, el) {\n        setProp(el, name, value.call(el, i, getProp(el, name)));\n      });\n    }\n\n    return domEach(this, function(i, el) {\n      if (!isTag(el)) return;\n\n      if (typeof name === 'object') {\n\n        _.each(name, function(val, name) {\n          setProp(el, name, val);\n        });\n\n      } else {\n        setProp(el, name, value);\n      }\n    });\n\n  }\n};\n\nvar setData = function(el, name, value) {\n  if (!el.data) {\n    el.data = {};\n  }\n\n  if (typeof name === 'object') return _.extend(el.data, name);\n  if (typeof name === 'string' && value !== undefined) {\n    el.data[name] = value;\n  } else if (typeof name === 'object') {\n    _.exend(el.data, name);\n  }\n};\n\n// Read the specified attribute from the equivalent HTML5 `data-*` attribute,\n// and (if present) cache the value in the node's internal data store. If no\n// attribute name is specified, read *all* HTML5 `data-*` attributes in this\n// manner.\nvar readData = function(el, name) {\n  var readAll = arguments.length === 1;\n  var domNames, domName, jsNames, jsName, value, idx, length;\n\n  if (readAll) {\n    domNames = Object.keys(el.attribs).filter(function(attrName) {\n      return attrName.slice(0, dataAttrPrefix.length) === dataAttrPrefix;\n    });\n    jsNames = domNames.map(function(domName) {\n      return camelCase(domName.slice(dataAttrPrefix.length));\n    });\n  } else {\n    domNames = [dataAttrPrefix + cssCase(name)];\n    jsNames = [name];\n  }\n\n  for (idx = 0, length = domNames.length; idx < length; ++idx) {\n    domName = domNames[idx];\n    jsName = jsNames[idx];\n    if (hasOwn.call(el.attribs, domName)) {\n      value = el.attribs[domName];\n\n      if (hasOwn.call(primitives, value)) {\n        value = primitives[value];\n      } else if (value === String(Number(value))) {\n        value = Number(value);\n      } else if (rbrace.test(value)) {\n        try {\n          value = JSON.parse(value);\n        } catch(e){ }\n      }\n\n      el.data[jsName] = value;\n    }\n  }\n\n  return readAll ? el.data : value;\n};\n\nexports.data = function(name, value) {\n  var elem = this[0];\n\n  if (!elem || !isTag(elem)) return;\n\n  if (!elem.data) {\n    elem.data = {};\n  }\n\n  // Return the entire data object if no data specified\n  if (!name) {\n    return readData(elem);\n  }\n\n  // Set the value (with attr map support)\n  if (typeof name === 'object' || value !== undefined) {\n    domEach(this, function(i, el) {\n      setData(el, name, value);\n    });\n    return this;\n  } else if (hasOwn.call(elem.data, name)) {\n    return elem.data[name];\n  }\n\n  return readData(elem, name);\n};\n\n/**\n * Get the value of an element\n */\n\nexports.val = function(value) {\n  var querying = arguments.length === 0,\n      element = this[0];\n\n  if(!element) return;\n\n  switch (element.name) {\n    case 'textarea':\n      return this.text(value);\n    case 'input':\n      switch (this.attr('type')) {\n        case 'radio':\n          if (querying) {\n            return this.attr('value');\n          } else {\n            this.attr('value', value);\n            return this;\n          }\n          break;\n        default:\n          return this.attr('value', value);\n      }\n      return;\n    case 'select':\n      var option = this.find('option:selected'),\n          returnValue;\n      if (option === undefined) return undefined;\n      if (!querying) {\n        if (!this.attr().hasOwnProperty('multiple') && typeof value == 'object') {\n          return this;\n        }\n        if (typeof value != 'object') {\n          value = [value];\n        }\n        this.find('option').removeAttr('selected');\n        for (var i = 0; i < value.length; i++) {\n          this.find('option[value=\"' + value[i] + '\"]').attr('selected', '');\n        }\n        return this;\n      }\n      returnValue = option.attr('value');\n      if (this.attr().hasOwnProperty('multiple')) {\n        returnValue = [];\n        domEach(option, function(i, el) {\n          returnValue.push(getAttr(el, 'value'));\n        });\n      }\n      return returnValue;\n    case 'option':\n      if (!querying) {\n        this.attr('value', value);\n        return this;\n      }\n      return this.attr('value');\n  }\n};\n\n/**\n * Remove an attribute\n */\n\nvar removeAttribute = function(elem, name) {\n  if (!elem.attribs || !hasOwn.call(elem.attribs, name))\n    return;\n\n  delete elem.attribs[name];\n};\n\n\nexports.removeAttr = function(name) {\n  domEach(this, function(i, elem) {\n    removeAttribute(elem, name);\n  });\n\n  return this;\n};\n\nexports.hasClass = function(className) {\n  return _.some(this, function(elem) {\n    var attrs = elem.attribs,\n        clazz = attrs && attrs['class'],\n        idx = -1,\n        end;\n\n    if (clazz) {\n      while ((idx = clazz.indexOf(className, idx+1)) > -1) {\n        end = idx + className.length;\n\n        if ((idx === 0 || rspace.test(clazz[idx-1]))\n            && (end === clazz.length || rspace.test(clazz[end]))) {\n          return true;\n        }\n      }\n    }\n  });\n};\n\nexports.addClass = function(value) {\n  // Support functions\n  if (typeof value === 'function') {\n    return domEach(this, function(i, el) {\n      var className = el.attribs['class'] || '';\n      exports.addClass.call([el], value.call(el, i, className));\n    });\n  }\n\n  // Return if no value or not a string or function\n  if (!value || typeof value !== 'string') return this;\n\n  var classNames = value.split(rspace),\n      numElements = this.length;\n\n\n  for (var i = 0; i < numElements; i++) {\n    // If selected element isn't a tag, move on\n    if (!isTag(this[i])) continue;\n\n    // If we don't already have classes\n    var className = getAttr(this[i], 'class'),\n        numClasses,\n        setClass;\n\n    if (!className) {\n      setAttr(this[i], 'class', classNames.join(' ').trim());\n    } else {\n      setClass = ' ' + className + ' ';\n      numClasses = classNames.length;\n\n      // Check if class already exists\n      for (var j = 0; j < numClasses; j++) {\n        var appendClass = classNames[j] + ' ';\n        if (setClass.indexOf(' ' + appendClass) < 0)\n          setClass += appendClass;\n      }\n\n      setAttr(this[i], 'class', setClass.trim());\n    }\n  }\n\n  return this;\n};\n\nvar splitClass = function(className) {\n  return className ? className.trim().split(rspace) : [];\n};\n\nexports.removeClass = function(value) {\n  var classes,\n      numClasses,\n      removeAll;\n\n  // Handle if value is a function\n  if (typeof value === 'function') {\n    return domEach(this, function(i, el) {\n      exports.removeClass.call(\n        [el], value.call(el, i, el.attribs['class'] || '')\n      );\n    });\n  }\n\n  classes = splitClass(value);\n  numClasses = classes.length;\n  removeAll = arguments.length === 0;\n\n  return domEach(this, function(i, el) {\n    if (!isTag(el)) return;\n\n    if (removeAll) {\n      // Short circuit the remove all case as this is the nice one\n      el.attribs.class = '';\n    } else {\n      var elClasses = splitClass(el.attribs.class),\n          index,\n          changed;\n\n      for (var j = 0; j < numClasses; j++) {\n        index = elClasses.indexOf(classes[j]);\n\n        if (index >= 0) {\n          elClasses.splice(index, 1);\n          changed = true;\n\n          // We have to do another pass to ensure that there are not duplicate\n          // classes listed\n          j--;\n        }\n      }\n      if (changed) {\n        el.attribs.class = elClasses.join(' ');\n      }\n    }\n  });\n};\n\nexports.toggleClass = function(value, stateVal) {\n  // Support functions\n  if (typeof value === 'function') {\n    return domEach(this, function(i, el) {\n      exports.toggleClass.call(\n        [el],\n        value.call(el, i, el.attribs['class'] || '', stateVal),\n        stateVal\n      );\n    });\n  }\n\n  // Return if no value or not a string or function\n  if (!value || typeof value !== 'string') return this;\n\n  var classNames = value.split(rspace),\n    numClasses = classNames.length,\n    state = typeof stateVal === 'boolean' ? stateVal ? 1 : -1 : 0,\n    numElements = this.length,\n    elementClasses,\n    index;\n\n  for (var i = 0; i < numElements; i++) {\n    // If selected element isn't a tag, move on\n    if (!isTag(this[i])) continue;\n\n    elementClasses = splitClass(this[i].attribs.class);\n\n    // Check if class already exists\n    for (var j = 0; j < numClasses; j++) {\n      // Check if the class name is currently defined\n      index = elementClasses.indexOf(classNames[j]);\n\n      // Add if stateValue === true or we are toggling and there is no value\n      if (state >= 0 && index < 0) {\n        elementClasses.push(classNames[j]);\n      } else if (state <= 0 && index >= 0) {\n        // Otherwise remove but only if the item exists\n        elementClasses.splice(index, 1);\n      }\n    }\n\n    this[i].attribs.class = elementClasses.join(' ');\n  }\n\n  return this;\n};\n\nexports.is = function (selector) {\n  if (selector) {\n    return this.filter(selector).length > 0;\n  }\n  return false;\n};\n\n"]},"metadata":{},"sourceType":"script"}